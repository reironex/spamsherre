<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Share Boost</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
    <style>
      /* Reset */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(135deg, #0f0f0f, #1a1a1a);
        color: #e0e0e0;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        padding: 30px;
      }

      .wrapper-container {
        max-width: 850px;
        width: 100%;
      }

      .container {
        background: rgba(20, 20, 20, 0.8);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 16px;
        padding: 25px;
        margin-bottom: 25px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.6);
        transition: transform 0.2s ease-in-out;
      }

      .container:hover {
        transform: translateY(-5px);
      }

      h1 {
        font-size: 2rem;
        color: #9a77ff;
        text-align: center;
        margin-bottom: 10px;
      }

      h4 {
        color: #9a9a9a;
        margin-bottom: 10px;
      }

      p {
        color: #b3b3b3;
        text-align: center;
        font-size: 15px;
        line-height: 1.6;
      }

      a {
        color: #77c7ff;
        text-decoration: none;
        font-weight: 600;
      }

      a:hover {
        text-decoration: underline;
      }

      /* Form Styling */
      .form-container {
        display: flex;
        flex-direction: column;
      }

      .form-item {
        margin-bottom: 15px;
      }

      label {
        font-size: 14px;
        font-weight: 600;
        margin-bottom: 6px;
        display: block;
        color: #d1d1d1;
      }

      input {
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.05);
        color: #fff;
        font-size: 15px;
        outline: none;
        transition: all 0.2s;
      }

      input:focus {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid #9a77ff;
      }

      button {
        width: 100%;
        padding: 14px;
        font-size: 16px;
        font-weight: bold;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        background: linear-gradient(135deg, #9a77ff, #77c7ff);
        color: #0a0a0a;
        transition: all 0.3s;
        box-shadow: 0 0 15px rgba(154, 119, 255, 0.4);
      }

      button:hover {
        background: linear-gradient(135deg, #77c7ff, #9a77ff);
        box-shadow: 0 0 20px rgba(154, 119, 255, 0.7);
        transform: translateY(-2px);
      }

      #result {
        display: none;
        text-align: center;
        background-color: #181818;
        border: 1px solid #333;
        padding: 12px;
        border-radius: 10px;
        font-size: 14px;
        margin-top: 15px;
      }

      /* Processing List */
      .current-online {
        font-size: 14px;
        background: rgba(255, 255, 255, 0.05);
        padding: 12px;
        color: #e0e0e0;
        border: 1px solid rgba(154, 119, 255, 0.3);
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(154, 119, 255, 0.15);
        margin-bottom: 10px;
        overflow: auto;
        white-space: nowrap;
      }
    </style>
  </head>
  <body>
    <div class="wrapper-container">
      <!-- Header -->
      <div class="container">
        <h1>üöÄ SHARE BOOST</h1>
        <p>
          A modern automated website that utilizes your Facebook AppState to streamline sharing posts using the provided URL.
        </p>
      </div>

      <!-- Form -->
      <div class="form-wrapper container">
        <form onsubmit="submitForm(event)" class="form-container">
          <div class="form-item">
            <label for="cookies">APPSTATE:</label>
            <input type="text" id="cookies" name="cookie" placeholder="Paste your AppState here" />
          </div>
          <div class="form-item">
            <label for="urls">LINK:</label>
            <input type="text" id="urls" name="url" placeholder="Enter Facebook post link" />
          </div>
          <div class="form-item">
            <label for="amounts">LIMIT:</label>
            <input type="text" id="amounts" name="amount" placeholder="Enter number of shares" />
          </div>
          <div class="form-item">
            <label for="intervals">DELAY (seconds):</label>
            <input type="text" id="intervals" name="interval" placeholder="e.g. 3" pattern="[0-9]*" />
          </div>
          <div class="form-item">
            <button type="submit" id="submit-button">üöÄ Start Sharing</button>
          </div>
          <div class="form-item">
            <div id="result"></div>
          </div>
        </form>
      </div>

      <!-- Processing -->
      <div class="container" id="process-container">
        <h1>üìä SHARE BOOST</h1>
        <h4>PROCESSING:</h4>
        <div id="processing"></div>
      </div>

      <!-- About -->
      <div class="container">
        <h1>‚ÑπÔ∏è ABOUT</h1>
        <p>
          You can find our open-source repository 
          <a href="https://github.com/" target="_blank">here</a>, encouraging developers to contribute, learn, and customize the website.
        </p>
      </div>
    </div>

    <script>
      async function submitForm(event) {
        event.preventDefault();
        const result = document.getElementById("result");
        const button = document.getElementById("submit-button");
        try {
          result.style.display = "block";
          button.disabled = true;
          result.innerHTML = "‚è≥ Processing request...";
          const response = await fetch("/api/submit", {
            method: "POST",
            body: JSON.stringify({
              cookie: document.getElementById("cookies").value,
              url: document.getElementById("urls").value,
              amount: document.getElementById("amounts").value,
              interval: document.getElementById("intervals").value,
            }),
            headers: {
              "Content-Type": "application/json",
            },
          });
          const data = await response.json();

          if (data.status === 200) {
            result.style.backgroundColor = "#1e4620";
            result.style.color = "#32ff7e";
            result.innerHTML = "‚úÖ Submitted successfully!";
          } else {
            result.style.backgroundColor = "#3D1619";
            result.style.color = "#FE6265";
            result.innerHTML = "‚ùå Error: " + data.error;
          }
          button.disabled = false;
        } catch (e) {
          console.error(e);
        }
      }

      async function linkOfProcessing() {
        try {
          const container = document.getElementById("processing");
          const processContainer = document.getElementById("process-container");
          const initialResponse = await fetch("/total");

          if (!initialResponse.ok) {
            throw new Error(`Failed to fetch: ${initialResponse.status}`);
          }

          const initialData = await initialResponse.json();
          if (initialData.length === 0) {
            processContainer.style.display = "none";
            return;
          }
          initialData.forEach((link, index) => {
            let { url, count, id, target, session } = link;
            const processCard = document.createElement("div");
            processCard.classList.add("current-online");

            const text = document.createElement("h4");
            text.classList.add("count-text");
            text.innerHTML = `${index + 1}. ID: ${id} | ${count}/${target}`;

            processCard.appendChild(text);
            container.appendChild(processCard);

            setInterval(async () => {
              const updateResponse = await fetch("/total");
              if (!updateResponse.ok) return;

              const updateData = await updateResponse.json();
              const updatedLink = updateData.find((link) => link.session === session);

              if (updatedLink) {
                let { count } = updatedLink;
                processCard.querySelector(".count-text").textContent = `${index + 1}. ID: ${id} | ${count}/${target}`;
              }
            }, 1000);
          });
        } catch (error) {
          console.error(error);
        }
      }
      linkOfProcessing();
    </script>
  </body>
</html>
